From 98093017f4acc6659a5d93f4d1eccf39c5c8baa0 Mon Sep 17 00:00:00 2001
From: KO Myung-Hun <komh@chollian.net>
Date: Fri, 29 Dec 2017 15:54:17 +0900
Subject: [PATCH 13/20] Revert "qt: fix crash when undocking playlist on
 Wayland + optimization elsewhere"

This reverts commit a420de32234b1517069c717d9cc7885854f7d289.
---
 modules/gui/qt/main_interface.cpp | 13 ++-----------
 1 file changed, 2 insertions(+), 11 deletions(-)

diff --git a/modules/gui/qt/main_interface.cpp b/modules/gui/qt/main_interface.cpp
index c8fb0154fb..09b1c060b0 100644
--- a/modules/gui/qt/main_interface.cpp
+++ b/modules/gui/qt/main_interface.cpp
@@ -1075,21 +1075,12 @@ void MainInterface::dockPlaylist( bool p_docked )
     if( !p_docked ) /* Previously docked */
     {
         playlistVisible = playlistWidget->isVisible();
-
-        /* repositioning the videowidget __before__ exporting the
-           playlistwidget into the playlist dialog avoids two unneeded
-           calls to the server in the qt library to reparent the underlying
-           native window back and forth.
-           For Wayland, this is mandatory since reparenting is not implemented.
-           For X11 or Windows, this is just an optimization. */
+        stackCentralW->removeWidget( playlistWidget );
+        dialog->importPlaylistWidget( playlistWidget );
         if ( videoWidget && THEMIM->getIM()->hasVideo() )
             showTab(videoWidget);
         else
             showTab(bgWidget);
-
-        /* playlistwidget exported into the playlist dialog */
-        stackCentralW->removeWidget( playlistWidget );
-        dialog->importPlaylistWidget( playlistWidget );
         if ( playlistVisible ) dialog->show();
     }
     else /* Previously undocked */
-- 
2.13.3

