From 97ad2152753a1442cddcb9ebea6666bd9f4d8f8a Mon Sep 17 00:00:00 2001
From: KO Myung-Hun <komh@chollian.net>
Date: Fri, 29 Dec 2017 15:54:25 +0900
Subject: [PATCH 21/24] Revert "qt: check if QDesktopWidget::screenNumber()
 returns a valid screen"

This reverts commit 117658e75806a47ed7e333818c259a6c0f71bb9f.
---
 modules/gui/qt/components/controller.cpp |  3 ---
 modules/gui/qt/main_interface.cpp        | 33 ++++++++++++++------------------
 2 files changed, 14 insertions(+), 22 deletions(-)

diff --git a/modules/gui/qt/components/controller.cpp b/modules/gui/qt/components/controller.cpp
index 19f0e29ff5..a0a2d30cc7 100644
--- a/modules/gui/qt/components/controller.cpp
+++ b/modules/gui/qt/components/controller.cpp
@@ -866,9 +866,6 @@ void FullscreenControllerWidget::restoreFSC()
         setMinimumWidth( FSC_WIDTH );
         adjustSize();
 
-        if ( targetScreen() < 0 )
-            return;
-
         QRect currentRes = QApplication::desktop()->screenGeometry( targetScreen() );
         windowHandle()->setScreen(QGuiApplication::screens()[targetScreen()]);
 
diff --git a/modules/gui/qt/main_interface.cpp b/modules/gui/qt/main_interface.cpp
index cf4d4c4810..1908981ddc 100644
--- a/modules/gui/qt/main_interface.cpp
+++ b/modules/gui/qt/main_interface.cpp
@@ -875,28 +875,23 @@ void MainInterface::setVideoFullScreen( bool fs )
             numscreen = QApplication::desktop()->screenNumber( p_intf->p_sys->p_mi );
 
         fullscreenControls->setTargetScreen( numscreen );
+        QRect screenres = QApplication::desktop()->screenGeometry( numscreen );
+        lastWinScreen = windowHandle()->screen();
+        windowHandle()->setScreen(QGuiApplication::screens()[numscreen]);
 
-        if ( numscreen >= 0 )
+        /* To be sure window is on proper-screen in xinerama */
+        if( !screenres.contains( pos() ) )
         {
+            lastWinPosition = pos();
+            lastWinSize = size();
+            msg_Dbg( p_intf, "Moving video to correct position");
+            move( QPoint( screenres.x(), screenres.y() ) );
+        }
 
-            QRect screenres = QApplication::desktop()->screenGeometry( numscreen );
-            lastWinScreen = windowHandle()->screen();
-            windowHandle()->setScreen(QGuiApplication::screens()[numscreen]);
-
-            /* To be sure window is on proper-screen in xinerama */
-            if( !screenres.contains( pos() ) )
-            {
-                lastWinPosition = pos();
-                lastWinSize = size();
-                msg_Dbg( p_intf, "Moving video to correct position");
-                move( QPoint( screenres.x(), screenres.y() ) );
-            }
-
-            /* */
-            if( playlistWidget != NULL && playlistWidget->artContainer->currentWidget() == videoWidget )
-            {
-                showTab( videoWidget );
-            }
+        /* */
+        if( playlistWidget != NULL && playlistWidget->artContainer->currentWidget() == videoWidget )
+        {
+            showTab( videoWidget );
         }
 
         /* we won't be able to get its windowed sized once in fullscreen, so update it now */
-- 
2.13.3

